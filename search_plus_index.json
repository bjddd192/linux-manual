{"./":{"url":"./","title":"我的 linux 学习手册","keywords":"","body":"简介 # 查看文件修改时间(精确到秒) ls --full-time # 要显示更多信息，用 stat 命令 stat test.txt Copyright © Mars丶小石头 2018 all right reserved，powered by Gitbook该文件修订时间： 2019-02-25 23:10:55 "},"Centos7/service/samba.html":{"url":"Centos7/service/samba.html","title":"samba","keywords":"","body":"samba samba 网络共享服务虽然速度不理想，但它是跨各种操作系统最稳定的网络共享存储方案，且部署简单，字符集也不会有任何问题。当然由于勒索病毒的出现，引发了共享安全问题，导致很多网络环境禁止使用 samba 服务，真是很遗憾，希望未来可以有更好的共享方案来作为替代。但 samba 服务本身还是非常有价值的，依然可以作为个人使用，快速实现跨系统的文件共享。 安装服务 rpm -qa | grep samba yum -y install samba 配置服务 配置文件地址：/etc/samba/smb.conf 内容： [global] # 自定义smb端口，并保留445端口，默认值为 445 139 smb ports = 445 555 workgroup = SAMBA server string = Samba Server netbios name = Samba Server display charset = UTF-8 unix charset = UTF-8 dos charset = GB2312 max log size = 50 security = user map to guest = Bad User [html] comment = static web path = /home/docker/nginx/html public = yes writable = yes browsable = yes guest ok = yes create mode = 0777 directory mode = 0777 [axure] comment = axure path = /home/docker/manual_online/html/axure public = yes writable = yes browsable = yes guest ok = yes create mode = 0777 directory mode = 0777 [sfds] comment = sfds path = /usr/local/sfds public = yes writable = no browsable = yes guest ok = yes create mode = 0744 directory mode = 0744 [RFAPK] comment = axure path = /usr/local/RFAPK public = yes writable = yes browsable = yes guest ok = yes create mode = 0777 directory mode = 0777 启动服务 systemctl restart smb systemctl enable smb systemctl status smb netstat -nltp | grep smbd 使用共享服务 linux yum -y install cifs-utils mkdir -p /mnt/samba/axure cd /mnt/samba/axure # 挂载 # 如调整了服务器的地址或者\b端口，在umount时会报错：target is busy 或者 Host is down # 可使用mount进行覆盖就正常了 mount -t cifs -o username=root,password=,port=555 //172.20.32.36/axure /mnt/samba/axure ls /mnt/samba/axure # 取消挂载 umount -f /mnt/samba/axure mac 访达 --> 连接服务器，添加服务器，如： smb://172.20.32.36 windows 445端口变更未成功，遗憾。 netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=445 connectaddress=172.20.32.36 connectport=1314 netsh interface portproxy delete v4tov4 listenaddress=0.0.0.0 listenport=445 参考资料 修改Windows SMB相关服务的默认端口 后WannaCrypt蠕虫勒索病毒445端口被封的网上邻居共享方法 netsh interface portproxy的一个简单例子 Copyright © Mars丶小石头 2018 all right reserved，powered by Gitbook该文件修订时间： 2019-01-10 14:00:02 "},"Centos7/service/Shadowsocks.html":{"url":"Centos7/service/Shadowsocks.html","title":"Shadowsocks","keywords":"","body":"Shadowsocks 科学上网神器。 服务端 已购买国外服务器搭建完成，这里暂不做记录。 客户端 安装 shadowsocks： yum -y install epel-release yum -y install python-pip pip install shadowsocks # 查看已安装软件列表 pip freeze mkdir -p /etc/shadowsocks 配置 shadowsocks： tee /etc/shadowsocks/shadowsocks.json 配置自启动 shadowsocks： tee /etc/systemd/system/shadowsocks.service 启动 shadowsocks 服务： systemctl enable shadowsocks.service systemctl restart shadowsocks.service systemctl status shadowsocks.service 验证客户端： curl --socks5 127.0.0.1:1080 http://httpbin.org/ip curl http://httpbin.org/ip 验证代理： export all_proxy=http://127.0.0.1:1080 export ftp_proxy=http://127.0.0.1:1080 export http_proxy=http://127.0.0.1:1080 export https_proxy=http://127.0.0.1:1080 export no_proxy=localhost,172.17.0.0/16,192.168.0.0/16.,127.0.0.1,10.10.0.0/16 curl -I www.google.com 发现此时 http 请求并不能代理成功，因为 shadowsocks 是 socks5 代理，需要再安装一个代理服务 privoxy。 Privoxy 官网 先取消使用代理： while read var; do unset $var; done 安装 privoxy： export http_proxy=\"\" export https_proxy=\"\" yum -y install privoxy systemctl enable privoxy systemctl restart privoxy systemctl status privoxy 配置 privoxy： tee /etc/privoxy/config 再来验证代理： export all_proxy=http://127.0.0.1:8118 export ftp_proxy=http://127.0.0.1:8118 export http_proxy=http://127.0.0.1:8118 export https_proxy=http://127.0.0.1:8118 export no_proxy=localhost,172.17.0.0/16,192.168.0.0/16.,127.0.0.1,10.10.0.0/16 curl -I www.google.com 发现可以正常连接了，哦耶。 参考资料 CentOS 7 安装使用Shadowsocks客户端 Copyright © Mars丶小石头 2018 all right reserved，powered by Gitbook该文件修订时间： 2019-02-07 11:58:19 "}}